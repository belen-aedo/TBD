<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/INSTRUCCIONES_CREDENCIALES.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/INSTRUCCIONES_CREDENCIALES.md" />
              <option name="updatedContent" value="# Instrucciones para Solucionar el Problema de Credenciales&#10;&#10;## Problema&#10;Si al intentar iniciar sesión recibes un error de &quot;Credenciales incorrectas&quot;, es posible que los usuarios en la base de datos fueron creados con contraseñas sin encriptar.&#10;&#10;## Solución&#10;&#10;### Opción 1: Registrar un nuevo usuario&#10;1. Ve a la página de registro&#10;2. Crea un nuevo usuario con sus credenciales&#10;3. Inicia sesión con ese nuevo usuario&#10;&#10;### Opción 2: Actualizar las contraseñas existentes en la base de datos&#10;&#10;Si tienes usuarios existentes en la base de datos, necesitas actualizar sus contraseñas para que estén correctamente encriptadas con BCrypt.&#10;&#10;**Ejemplo de hash BCrypt para la contraseña &quot;123456&quot;:**&#10;```&#10;$2a$10$XYZ... (el hash completo que genera Spring Security)&#10;```&#10;&#10;Puedes generar un hash BCrypt usando este código Java temporal:&#10;&#10;```java&#10;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#10;&#10;public class GenerarHash {&#10;    public static void main(String[] args) {&#10;        BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();&#10;        String password = &quot;123456&quot;; // Cambia esto por tu contraseña&#10;        String hash = encoder.encode(password);&#10;        System.out.println(&quot;Hash: &quot; + hash);&#10;    }&#10;}&#10;```&#10;&#10;O usa este SQL para actualizar un usuario existente:&#10;```sql&#10;UPDATE usuario &#10;SET contrasena = '$2a$10$CwTycUXWue0Thq9StjUM0uJ8C3SRz7eJ.SvZ3F8zj5Z.7Lx0Q3HI2' &#10;WHERE nombre_usuario = 'tu_usuario';&#10;```&#10;(Reemplaza el hash con uno generado para tu contraseña)&#10;&#10;### Opción 3: Verificar los logs del backend&#10;&#10;El backend tiene logs detallados en el login. Revisa la consola del backend cuando intentas iniciar sesión para ver:&#10;- Si el usuario existe&#10;- Si la contraseña coincide&#10;- Cualquier error específico&#10;&#10;## Cambios Realizados&#10;&#10;Se han realizado los siguientes cambios en la aplicación:&#10;&#10;1. ✅ **Navbar oculto en Login/Registro** - El navbar ya no se muestra en las páginas de login y registro&#10;2. ✅ **Colores actualizados** - Los bordes cambiaron de azul (#00d4ff) a naranjo (#ff8c42)&#10;3. ✅ **Iconos modernizados** - Se actualizaron los iconos en:&#10;   - Tareas: ✓ para completar,  para eliminar&#10;   - Navbar:  para tareas,  para análisis&#10;   - Cerrar sesión: ⎋&#10;4. ✅ **Compatibilidad de localStorage** - Se guarda el usuario en 'usuario' además de 'user'&#10;5. ✅ **Nombre de aplicación** - Se cambió de &quot;TaskGeo&quot; a &quot;Gestión Tareas&quot;&#10;&#10;## Verificación de Autenticación&#10;&#10;El análisis requiere autenticación. Asegúrate de que:&#10;1. Estés correctamente autenticado&#10;2. El token se esté enviando en las peticiones (el interceptor de axios lo hace automáticamente)&#10;3. El backend esté corriendo en http://localhost:8080&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/RESUMEN_CAMBIOS.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/RESUMEN_CAMBIOS.md" />
              <option name="updatedContent" value="# Resumen de Cambios Realizados&#10;&#10;## ✅ Cambios Completados&#10;&#10;### 1. Navbar No Aparece en Login/Registro ✓&#10;&#10;**Archivos modificados:**&#10;- `gestion-tareas-frontend/src/core/router/index.js`&#10;  - Se agregaron nombres a las rutas de login y registro (`name: 'login'` y `name: 'registro'`)&#10;  &#10;**Comportamiento:**&#10;El navbar ahora se oculta correctamente en las páginas de autenticación gracias a la lógica en `App.vue` que verifica `route.name`.&#10;&#10;---&#10;&#10;### 2. Sistema de Colores: De Azul a Naranjo ✓&#10;&#10;**Archivos modificados:**&#10;- `gestion-tareas-frontend/src/App.vue`&#10;  - `--primary-color`: `#00d4ff` → `#ff8c42` (naranjo/naranja)&#10;  - `--primary-dark`: `#00a8cc` → `#ff6b1a`&#10;  - `--accent-color`: `#7b68ee` → `#ffa726`&#10;&#10;**Efecto:**&#10;Todos los bordes, botones, enlaces activos y elementos destacados ahora usan tonos naranjas en lugar de azul.&#10;&#10;---&#10;&#10;### 3. Iconos Modernizados ✓&#10;&#10;**Archivos modificados:**&#10;- `gestion-tareas-frontend/src/modules/core/components/Navbar.vue`&#10;  - Logo: `` → `✓`&#10;  - Tareas: `` → ``&#10;  - Análisis: `` → ``&#10;  - Cerrar sesión: `` → `⎋`&#10;&#10;- `gestion-tareas-frontend/src/modules/tareas/views/ListaTareas.vue`&#10;  - Completar: `✅` → `✓`&#10;  - Eliminar: `️` → ``&#10;  - Análisis: `` → ``&#10;&#10;**Resultado:**&#10;Iconos más minimalistas y profesionales en toda la aplicación.&#10;&#10;---&#10;&#10;### 4. Nombre de la Aplicación: TaskGeo → Gestión Tareas ✓&#10;&#10;**Archivos modificados:**&#10;- `gestion-tareas-frontend/src/modules/core/components/Navbar.vue`&#10;  - `brand-name`: &quot;TaskGeo&quot; → &quot;Gestión Tareas&quot;&#10;&#10;**Efecto:**&#10;El nombre se muestra en el navbar y es más descriptivo del propósito de la aplicación.&#10;&#10;---&#10;&#10;### 5. Problema de Credenciales - Análisis y Solución ✓&#10;&#10;**Archivos modificados:**&#10;- `gestion-tareas-frontend/src/stores/auth.store.js`&#10;  - Se agregó `localStorage.setItem('usuario', ...)` para compatibilidad con el Navbar&#10;  - Se elimina también 'usuario' al hacer logout&#10;  - Se removió importación no usada de `useRouter`&#10;&#10;**Archivos creados:**&#10;- `INSTRUCCIONES_CREDENCIALES.md` - Guía detallada para solucionar problemas de login&#10;- `gestion-tareas-backend/CREDENCIALES_TEST.md` - Credenciales de prueba y comandos útiles&#10;&#10;**Backend:**&#10;- `gestion-tareas-backend/.../controller/AuthController.java`&#10;  - Se agregó endpoint `/api/auth/hash-password` para generar hashes BCrypt&#10;&#10;**Análisis del Problema:**&#10;El archivo `test.sql` ya incluye un usuario &quot;admin&quot; con contraseña hasheada correctamente:&#10;```&#10;Usuario: admin&#10;Contraseña: 1234&#10;Hash: $2a$12$Ndl.ZNvI1pvrJNWPNUUQEOnj.QUy7U5HN9jk1U7MPA.eYSg1BjkrW&#10;```&#10;&#10;Si hay problemas de login:&#10;1. Verificar que la BD tenga los datos del test.sql&#10;2. Revisar logs del backend (tiene debug detallado)&#10;3. Usar el endpoint `/api/auth/hash-password` para generar nuevos hashes&#10;4. O registrar un nuevo usuario desde el frontend&#10;&#10;---&#10;&#10;### 6. Mostrar Nombre de Usuario en Navbar ✓&#10;&#10;**Estado Actual:**&#10;El navbar ya mostraba el nombre de usuario. Se mejoró la compatibilidad asegurando que se guarde en localStorage tanto como 'user' como 'usuario'.&#10;&#10;**Comportamiento:**&#10;- Muestra las iniciales del usuario en el avatar&#10;- Muestra el nombre completo en el menú desplegable&#10;- Se obtiene de `localStorage.getItem('usuario')`&#10;&#10;---&#10;&#10;### 7. Panel de Análisis ✓&#10;&#10;**Estado Actual:**&#10;Los endpoints de análisis están implementados en el backend y requieren autenticación.&#10;&#10;**Archivos verificados:**&#10;- `gestion-tareas-backend/.../controller/TareaController.java`&#10;  - Todos los endpoints `/api/tareas/analisis/*` funcionan con autenticación JWT&#10;  &#10;- `gestion-tareas-frontend/src/modules/analisis/api/analisis.service.js`&#10;  - Configurado correctamente con axios que incluye el token automáticamente&#10;&#10;**Requisitos para que funcione:**&#10;1. ✅ Backend corriendo en `http://localhost:8080`&#10;2. ✅ Usuario autenticado con token válido&#10;3. ✅ Datos en la base de datos (sectores y tareas)&#10;&#10;---&#10;&#10;##  Checklist de Verificación&#10;&#10;Para probar todos los cambios:&#10;&#10;- [ ] El backend está corriendo&#10;- [ ] La base de datos PostgreSQL está activa&#10;- [ ] El script `test.sql` se ejecutó correctamente&#10;- [ ] El frontend está corriendo en puerto 5173&#10;- [ ] Puedes hacer login con `admin/1234`&#10;- [ ] El navbar NO aparece en login/registro&#10;- [ ] El navbar SÍ aparece en tareas/análisis&#10;- [ ] Los colores son naranjas (no azules)&#10;- [ ] Los iconos se ven modernos&#10;- [ ] El nombre dice &quot;Gestión Tareas&quot;&#10;- [ ] Aparece tu nombre de usuario en el navbar&#10;- [ ] El análisis carga correctamente&#10;&#10;---&#10;&#10;##  Comandos Útiles&#10;&#10;### Iniciar Backend&#10;```bash&#10;cd gestion-tareas-backend&#10;./mvnw spring-boot:run&#10;```&#10;&#10;### Iniciar Frontend&#10;```bash&#10;cd gestion-tareas-frontend&#10;npm run dev&#10;```&#10;&#10;### Generar Hash de Contraseña&#10;```bash&#10;curl -X POST http://localhost:8080/api/auth/hash-password \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -d &quot;\&quot;tu_contraseña\&quot;&quot;&#10;```&#10;&#10;---&#10;&#10;##  Archivos Modificados&#10;&#10;### Frontend&#10;1. `src/App.vue` - Colores del sistema de diseño&#10;2. `src/core/router/index.js` - Nombres de rutas&#10;3. `src/stores/auth.store.js` - Compatibilidad localStorage&#10;4. `src/modules/core/components/Navbar.vue` - Iconos y nombre&#10;5. `src/modules/tareas/views/ListaTareas.vue` - Iconos&#10;6. `README.md` - Documentación actualizada&#10;&#10;### Backend&#10;1. `src/main/java/.../controller/AuthController.java` - Endpoint hash-password&#10;&#10;### Documentación&#10;1. `INSTRUCCIONES_CREDENCIALES.md` (nuevo)&#10;2. `gestion-tareas-backend/CREDENCIALES_TEST.md` (nuevo)&#10;3. `RESUMEN_CAMBIOS.md` (este archivo)&#10;&#10;---&#10;&#10;##  Resultado Final&#10;&#10;La aplicación ahora tiene:&#10;- ✅ Interfaz más profesional con colores naranjas&#10;- ✅ Iconos modernizados&#10;- ✅ Mejor experiencia de usuario (navbar contextual)&#10;- ✅ Documentación completa para debugging&#10;- ✅ Herramientas para solucionar problemas de autenticación&#10;&#10;---&#10;&#10;**Fecha de cambios:** 24 de Diciembre de 2024&#10;**Versión:** 1.1.0&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/SOLUCION-USUARIO-NO-ENCONTRADO.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/SOLUCION-USUARIO-NO-ENCONTRADO.md" />
              <option name="updatedContent" value="# SOLUCIÓN AL PROBLEMA: Usuario no encontrado&#10;&#10;## Problema&#10;El error `Usuario no encontrado` aparece porque la base de datos PostgreSQL no tiene los datos de prueba cargados, específicamente el usuario &quot;admin&quot;.&#10;&#10;## Solución Rápida - Ejecutar SQL Manualmente&#10;&#10;### Opción 1: Usando pgAdmin (Recomendado)&#10;&#10;1. Abre **pgAdmin 4**&#10;2. Conéctate a tu servidor PostgreSQL&#10;3. Busca la base de datos `gestion_tareas_db`&#10;4. Haz clic derecho en `gestion_tareas_db` → **Query Tool**&#10;5. Copia y pega el siguiente contenido del archivo:&#10;   - Ruta: `gestion-tareas-backend\src\main\resources\test.sql`&#10;6. Haz clic en el botón **Execute/Run** (▶️) o presiona F5&#10;7. Verifica que se ejecutó sin errores&#10;&#10;### Opción 2: Usando la línea de comandos (psql)&#10;&#10;Si tienes `psql` en tu PATH:&#10;&#10;```bash&#10;cd C:\Users\brand\Desktop\gestion-tareas-proyect&#10;set PGPASSWORD=1234&#10;psql -U postgres -d gestion_tareas_db -f gestion-tareas-backend\src\main\resources\test.sql&#10;```&#10;&#10;### Opción 3: Solo insertar datos (si las tablas ya existen)&#10;&#10;Si ya tienes las tablas creadas pero están vacías:&#10;&#10;1. Abre **pgAdmin 4**&#10;2. Abre el archivo: `gestion-tareas-backend\src\main\resources\insertar-datos.sql`&#10;3. Ejecuta ese script en lugar del test.sql completo&#10;&#10;## Verificar que funcionó&#10;&#10;Después de ejecutar el script, verifica que los datos se cargaron:&#10;&#10;```sql&#10;-- En pgAdmin o psql, ejecuta:&#10;SELECT * FROM usuario WHERE nombre_usuario = 'admin';&#10;```&#10;&#10;Deberías ver algo como:&#10;```&#10;id_usuario | nombre_usuario | contrasena (hash) | ubicacion_geografica&#10;-----------+----------------+-------------------+----------------------&#10;     1     |     admin      | $2a$12$Ndl...    | POINT(...)&#10;```&#10;&#10;## Credenciales de prueba&#10;&#10;Después de ejecutar el script, podrás iniciar sesión con:&#10;- **Usuario**: `admin`&#10;- **Contraseña**: `1234`&#10;&#10;## Solución Permanente&#10;&#10;Para que el script se ejecute automáticamente cada vez que inicies la aplicación Spring Boot:&#10;&#10;1. La configuración ya está lista en `application.properties`&#10;2. El archivo `test.sql` se ejecutará al iniciar la aplicación&#10;3. Si ya tienes datos y no quieres que se borren, cambia en `application.properties`:&#10;   ```properties&#10;   spring.sql.init.mode=never&#10;   ```&#10;&#10;## ¿Por qué pasó esto?&#10;&#10;Spring Boot estaba configurado para ejecutar el script `test.sql` al inicio, pero:&#10;- La configuración `spring.jpa.defer-datasource-initialization` estaba en `false`&#10;- Esto causaba que el script se ejecutara ANTES de que Hibernate creara las tablas&#10;- Resultado: el script fallaba silenciosamente&#10;&#10;**Solución aplicada**: Cambié `spring.jpa.defer-datasource-initialization=true` para que el script se ejecute DESPUÉS de la inicialización de JPA.&#10;&#10;## Próximos pasos&#10;&#10;1. Ejecuta el script SQL manualmente (Opción 1 recomendada)&#10;2. Reinicia tu aplicación Spring Boot&#10;3. Intenta hacer login con admin/1234&#10;4. ¡Debería funcionar! &#10;&#10;## Script ejecutar-bd.bat&#10;&#10;También he creado un script `reiniciar-bd.bat` en la raíz del proyecto que intenta ejecutar el script SQL automáticamente. Si encuentras `psql.exe`, lo ejecutará por ti.&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/gestion-tareas-backend/CREDENCIALES_TEST.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/gestion-tareas-backend/CREDENCIALES_TEST.md" />
              <option name="updatedContent" value="# Credenciales de Prueba&#10;&#10;## Usuario por Defecto&#10;&#10;El archivo `test.sql` crea un usuario de prueba:&#10;&#10;```&#10;Usuario: admin&#10;Contraseña: 1234&#10;```&#10;&#10;**Importante:** Este usuario ya tiene la contraseña correctamente hasheada con BCrypt en la base de datos.&#10;&#10;## Verificación&#10;&#10;Si tienes problemas para iniciar sesión:&#10;&#10;1. **Asegúrate de que la base de datos esté iniciada**&#10;2. **Verifica que el script test.sql se haya ejecutado correctamente**&#10;3. **Revisa los logs del backend** cuando intentas iniciar sesión&#10;&#10;El backend imprime logs detallados que te dirán exactamente qué está pasando:&#10;```&#10;=== INICIO LOGIN ===&#10;Usuario recibido: admin&#10;Contraseña recibida: 1234&#10;Usuario encontrado en BD: admin&#10;Hash en BD: $2a$12$...&#10;¿Contraseña coincide?: true/false&#10;```&#10;&#10;## Generar Hash de Contraseña&#10;&#10;Si necesitas generar un hash para una contraseña nueva, puedes usar el endpoint:&#10;&#10;```bash&#10;curl -X POST http://localhost:8080/api/auth/hash-password \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -d &quot;\&quot;tu_contraseña\&quot;&quot;&#10;```&#10;&#10;Este endpoint te devolverá el hash BCrypt que puedes usar en la base de datos.&#10;&#10;## Registrar Nuevo Usuario&#10;&#10;Alternativamente, puedes registrar un nuevo usuario desde el frontend:&#10;&#10;1. Ve a http://localhost:5173/registro&#10;2. Completa el formulario:&#10;   - Nombre de usuario&#10;   - Contraseña&#10;   - Latitud (ej: -33.4500)&#10;   - Longitud (ej: -70.6500)&#10;3. Haz clic en &quot;Registrarse&quot;&#10;4. Usa esas credenciales para iniciar sesión&#10;&#10;## Actualizar Contraseña Manualmente&#10;&#10;Si necesitas actualizar la contraseña de un usuario existente en la base de datos:&#10;&#10;```sql&#10;-- Para la contraseña &quot;1234&quot;&#10;UPDATE usuario &#10;SET contrasena = '$2a$12$Ndl.ZNvI1pvrJNWPNUUQEOnj.QUy7U5HN9jk1U7MPA.eYSg1BjkrW' &#10;WHERE nombre_usuario = 'admin';&#10;&#10;-- Para generar un hash nuevo, usa el endpoint /api/auth/hash-password&#10;```&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/gestion-tareas-backend/GenerateHash.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/gestion-tareas-backend/GenerateHash.java" />
              <option name="updatedContent" value="import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#10;&#10;public class GenerateHash {&#10;    public static void main(String[] args) {&#10;        BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();&#10;        String password = &quot;12345&quot;;&#10;        String hash = encoder.encode(password);&#10;        System.out.println(&quot;Hash para '12345': &quot; + hash);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/reiniciar-bd.bat">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/reiniciar-bd.bat" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="@echo off&#10;echo ======================================&#10;echo  REINICIANDO BASE DE DATOS&#10;echo ======================================&#10;echo.&#10;echo Este script ejecutara test.sql en PostgreSQL&#10;echo.&#10;&#10;set PGPASSWORD=1234&#10;&#10;echo Intentando encontrar psql.exe...&#10;echo.&#10;&#10;REM Intentar varias rutas comunes de PostgreSQL&#10;if exist &quot;C:\Program Files\PostgreSQL\16\bin\psql.exe&quot; (&#10;    set PSQL_PATH=&quot;C:\Program Files\PostgreSQL\16\bin\psql.exe&quot;&#10;) else if exist &quot;C:\Program Files\PostgreSQL\15\bin\psql.exe&quot; (&#10;    set PSQL_PATH=&quot;C:\Program Files\PostgreSQL\15\bin\psql.exe&quot;&#10;) else if exist &quot;C:\Program Files\PostgreSQL\14\bin\psql.exe&quot; (&#10;    set PSQL_PATH=&quot;C:\Program Files\PostgreSQL\14\bin\psql.exe&quot;&#10;) else if exist &quot;C:\Program Files\PostgreSQL\13\bin\psql.exe&quot; (&#10;    set PSQL_PATH=&quot;C:\Program Files\PostgreSQL\13\bin\psql.exe&quot;&#10;) else if exist &quot;C:\Program Files (x86)\PostgreSQL\16\bin\psql.exe&quot; (&#10;    set PSQL_PATH=&quot;C:\Program Files (x86)\PostgreSQL\16\bin\psql.exe&quot;&#10;) else (&#10;    echo ERROR: No se pudo encontrar psql.exe&#10;    echo Por favor, ejecuta manualmente el script test.sql en pgAdmin o psql&#10;    echo.&#10;    echo Ubicacion del script: gestion-tareas-backend\src\main\resources\test.sql&#10;    echo Base de datos: gestion_tareas_db&#10;    echo Usuario: postgres&#10;    echo.&#10;    pause&#10;    exit /b 1&#10;)&#10;&#10;echo Usando: %PSQL_PATH%&#10;echo.&#10;echo Ejecutando script SQL...&#10;%PSQL_PATH% -U postgres -d gestion_tareas_db -f &quot;gestion-tareas-backend\src\main\resources\test.sql&quot;&#10;&#10;if %ERRORLEVEL% EQU 0 (&#10;    echo.&#10;    echo ======================================&#10;    echo  BASE DE DATOS REINICIADA CON EXITO&#10;    echo ======================================&#10;    echo.&#10;    echo Usuario de prueba creado:&#10;    echo   Usuario: admin&#10;    echo   Contrasena: 1234&#10;    echo.&#10;) else (&#10;    echo.&#10;    echo ======================================&#10;    echo  ERROR AL REINICIAR BASE DE DATOS&#10;    echo ======================================&#10;    echo.&#10;    echo Verifica que:&#10;    echo 1. PostgreSQL este instalado y corriendo&#10;    echo 2. La base de datos 'gestion_tareas_db' exista&#10;    echo 3. El usuario 'postgres' tenga contrasena '1234'&#10;    echo.&#10;    echo Si PostgreSQL no esta en las rutas comunes,&#10;    echo ejecuta manualmente el script test.sql usando pgAdmin&#10;    echo.&#10;)&#10;&#10;pause&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>